---
layout: post
title: JS隐式类型转换
category: JS
tags: JS类型转换
description: 
---

## 类型转换
### 转Boolean
在条件判断时，除了 undefined， null， false， NaN， ''， 0， -0，其他所有值都转为 true，包括所有对象。

### 对象转基本类型
对象在转换基本类型时，首先会调用 valueOf 然后调用 toString。并且这两个方法是可以重写的。
```js
let a = {
    valueOf() {
    	return 0
    }
}
```
### 四则运算符
只有当加法运算时，其中一方是字符串类型，就会把另一个也转为字符串类型。其他运算只要其中一方是数字，那么另一方就转为数字。并且加法运算会触发三种类型转换：将值转换为原始值，转换为数字，转换为字符串。

```js
1 + '1' // '11'
2 * '2' // 4
[1, 2] + [2, 1] // '1,22,1'
// [1, 2].toString() -> '1,2'
// [2, 1].toString() -> '2,1'
// '1,2' + '2,1' = '1,22,1'
对于加号需要注意这个表达式 'a' + + 'b'

'a' + + 'b' // -> "aNaN"
// 因为 + 'b' -> NaN
// 你也许在一些代码中看到过 + '1' -> 1
```

### == 操作符

![图片1](https://user-gold-cdn.xitu.io/2018/3/30/16275f89ebf931e9)

上图中的 toPrimitive 就是对象转基本类型。

一般推荐使用 === 判断两个值，但是你如果想知道一个值是不是 null ，你可以通过 xx == null 来比较。

这里来解析一道题目 [] == ![] // -> true ，下面是这个表达式为何为 true 的步骤

```js
// [] 转成 true，然后取反变成 false
[] == false
// 根据第 8 条得出
[] == ToNumber(false)
[] == 0
// 根据第 10 条得出
ToPrimitive([]) == 0
// [].toString() -> ''
'' == 0
// 根据第 6 条得出
0 == 0 // -> true
```

### 比较运算符
如果是对象，就通过 toPrimitive 转换对象

如果是字符串，就通过 unicode 字符索引来比较
