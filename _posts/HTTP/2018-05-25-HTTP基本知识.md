---
layout: post
title: HTTP基本知识
category: HTTP
tags: HTTP
keywords: HTTP
description: HTTP
---

## HTTP报文结构
报文首部+空行+报文主体

### 请求报文首部
请求行+请求首部字段+通用首部字段+实体首部字段

#### 请求行
请求方法+空格+请求URI+空格+HTTP版本

### 响应报文首部
响应行（状态行）+响应首部字段+通用首部字段+实体首部字段

#### 状态行
HTTP版本+空格+状态码+原因短语

## 头部字段
### 请求首部字段
```http
Accept:客户端能够处理的媒体类型

Accept-Language:客户端能够处理的自然语言集

Host:告知服务器，请求的资源所处的互联网主机名和端口号（请求中必须包含的字段）

If-match:Etag标记。当if-match中的eTag与服务器中的ETag相同时，服务器才会接受请求。

If-none-match:Etag标记。当if-match中的eTag与服务器中的ETag不同时，服务器才会接受请求。

If-modified-since:时间。只有在此时间后，资源发生更新，服务器才会接受请求。

Referer:请求的URI是从哪个页面发起的
```

### 响应首部字段
```http
Accept-Ranges:是否接受范围请求，可接受时为true，否则为none
Age:告知客户端，源服务器在多久之前创建了响应
ETag:资源在服务器端的唯一标识
Location:重定向到某位置
Server:告知客户端，此服务器上安装的http服务器应用程序名称
```
### 通用首部字段
```http
cache-control:控制缓存的行为 
              no-cache：缓存服务器不能缓存资源，且源服务器以后不会对资源有效性进行确认
              no-store：规定缓存不能在本地存储请求和响应的任一部分
              max-age：有效的时间

connection:控制不再转发给代理的首部字段；管理持久连接（当想要关闭时使用Connection：close）

Date:创建http报文的时间

Via:用于追踪报文的转发，还可以避免请求回环的发生。
```

### 实体首部字段
```http
Allow:告知客户端，服务器所支持的http方法

Content-Encoding:告知客户端，服务器对实体的主体部分采用的编码方式

Content-Language:实体主体的自然语言

Content-Type:实体主体的媒体类型

Expires:实体主体的过期时间

Last-Modified:资源的最后修改时间
```

## 状态码
```
200 OK 请求成功

204 No Content 请求成功，没有资源返回

206 Partical Content 部分内容，范围请求的成功返回

301 Moved Permanent 永久重定向 

302 Found 临时重定向

303 See Other 与302功能一样，但明确表示应当用get方法获取资源

304 Not Modified 客户端有缓冲的文档并发出了一个条件性的请求（一般是提供If-Modified-Since头，表示客户只想比指定日期更新的文档）。服务器告诉客户，原来缓冲的文档还可以继续使用。可直接使用客户端未过期缓存

400 Bad Request 请求的语法错误

401 Unanthorized 请求要求用户的身份认证

403 Forbidden 服务器拒绝此请求

404 Not Found 找不到资源

405 Method Not Allowed 

500 Internal Server Error 服务器内部错误

501 No Implemented 不支持请求的功能

502 Bad Gateway 充当网关或代理的服务器收到一个无效请求

503 Service Unavaiable 服务不可用，服务器超载或系统维护
```

## HTTP的缺点
1.通信使用明文（不加密），内容可能会被窃听

2.不验证通信方的身份，有可能遭遇伪装

3.无法证明报文的完整性，有可能遭篡改

## HTTPS
HTTPS = HTTP + SSL

HTTP + 通信加密 + 证书 + 完整性保护 = HTTPS
